{% extends 'base.html.twig' %}

{% block title %}
    {% if article is defined and article is not null %}
        Article n°{{ article.id }}
    {% else %}
        Id not found
    {% endif %}
{% endblock %}

{% block stylesheets %}
    {{parent()}}

{% endblock %}

{% set lorem = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut feugiat turpis a sem tincidunt porttitor. Cras sodales id tellus in rhoncus. Integer hendrerit non quam ut tincidunt. In elementum nunc id ante malesuada, sed porta neque pretium. Curabitur convallis leo id risus lobortis porttitor. Integer id sem erat. Integer rutrum risus ac nisl fermentum, et laoreet lectus porta. Vestibulum hendrerit ornare scelerisque.

Suspendisse facilisis nisi vitae mauris rhoncus tempus sed eu augue. In venenatis diam a libero lobortis accumsan. Donec a leo commodo, accumsan nisi vel, ultrices sapien. Maecenas felis elit, accumsan ac purus sit amet, laoreet aliquam turpis. Vivamus ex metus, dignissim nec ornare nec, porta a turpis. Vivamus lobortis faucibus dui. In hac habitasse platea dictumst. Sed convallis, lorem a dapibus accumsan, turpis est aliquet neque, vitae euismod risus velit eget ligula. Mauris id tincidunt ipsum. Integer ullamcorper dignissim neque quis feugiat. Etiam luctus enim eget mi faucibus cursus.

Mauris ut ornare eros. Aliquam id diam vulputate, pulvinar massa eu, tincidunt eros. Sed vehicula ipsum dictum ullamcorper sagittis. Sed eu porta diam, nec ullamcorper ante. Integer ac ante sit amet lorem facilisis mattis sit amet in nibh. Integer posuere mi dignissim ante laoreet, aliquet lacinia velit commodo. Duis ullamcorper imperdiet lacus sed fermentum.

Vestibulum imperdiet interdum hendrerit. Nunc nunc eros, ultricies a scelerisque eget, elementum vitae nisl. Donec nec quam mi. Pellentesque vitae odio sed mi dignissim ornare. Aenean et massa vitae sapien tempor ultrices a ac ligula. In hendrerit, diam in mollis ultrices, tellus diam ornare turpis, id porttitor quam libero eget leo. Vivamus tincidunt egestas nisl." %}

{% block body %}

{% include "menu/_menu.html.twig" %}

    <div class="container">

    {% if article is defined and article is not null %}
        <h1>{{article.titre}} </h1>
        <small>{{article.dateCreation|date('d/m/Y')}}</small>
        <p>{{article.contenu}}</p>

        <h2>Commentaires</h2>

        <div class='row'>
            
    {% if article.comments is defined and article.comments|length > 0 %}
        {% for comment in article.comments%}
            <div class="col-md-12">
                <small>Le {{comment.dateComment|date("d/m/Y")}} par <b>{{comment.author}}</b></small>
                <p>{{comment.contenu}}</p>
                </div>
        {% endfor %}
    {% else %}
        <p>Pas de commentaire.</p>  
    {% endif %}
        </div>    
    {% else %}
        <h1>Erreur</h1>
        <small>{{"now"|date()}}</small>
        <p>Article non trouvé.</p>
    {% endif %}


    {% for label, messages in app.session.flashbag.all() %}
        {% for message in messages %}
            <div class='alert alert-{{ label }}'>
                {{ message }}
            </div>
        {% endfor %}
    {% endfor %}


        <h2>Donnez votre avis</h2>
        {% block form %}
            {{ form_start(form) }}
                {{ form_errors(form) }}

                {{ form_label(form.author,null,{'label_attr':{'class':'form-label'}}) }}
                {{ form_widget(form.author,{'attr':{'class':'form-control'}}) }}

                {{ form_label(form.contenu,null,{'label_attr':{'class':'form-label'}}) }}
                {{ form_widget(form.contenu,{'attr':{'class':'form-control'}}) }}

                {{form_rest(form)}}

                <button type="submit" class="mt-3 btn btn-info">Ajouter</button>
            {{ form_end(form) }} 
        {% endblock %}

        </div>



{% endblock %}







{% block javascripts %}

<script type="module">
    import { helloWorld } from '{{ asset('js/script.js') }}';
    console.log('test');
   // helloWorld();
</script>

{% endblock %}


